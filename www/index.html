<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="msapplication-tap-highlight" content="no" />
	<meta name="viewport" content="user-scalable=yes, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
	<script src="phonegap.js"></script>
	<title>Sign In</title>
</head>
<body>
	<div class = "app" id = "app">

		<!-- Login -->
		<!-- Login -->
		<div id = "view-signin" class = "viewframe">
			<img id = "nearbylogo" src = "img/nearbylogo.png"/>
			<div id = "signin-form">
				<div id = "signin-status"></div>
				username: <input type = "text" name = "email" id = "signin-username"><br>
				password: <input type = "text" name = "password" id = "signin-password"><br>
				login with facebook: under construction<br>
				<button id = "signin-button">Login</button><br>
				<button class = "goto-signup">Sign Up</button><br>
				<button class = "goto-trending">Continue as Guest</button><br>
				<button class = "goto-maps">Maps</button><br>
				<button id = "login-with-facebook">Facebook Signin</button>
			</div>
		</div>

		<!-- Signup -->
		<!-- Signup -->
		<div id = "view-signup" class = "viewframe">
			<img id = "nearbylogo" src = "img/nearbylogo.png"/>
			<div id = "signup-form">
				<div id = "signup-status"></div>
				e-mail: <input type = "text" name = "email" id = "signup-email"><br>
				username: <input type = "text" name = "username" id = "signup-username"><br>
				password: <input type = "text" name = "password" id = "signup-password"><br>
				confirm password: <input type = "text" name = "confirm-password" id = "signup-confirm-password"><br>
				login with facebook: under construction<br>
				<button id = "signup-button">Sign Up</button><br>
				<button class = "goto-signin">Go Back</button><br>
			</div>
		</div>

		<!-- Trending -->
		<!-- Trending -->
		<div id = "view-trending" class = "viewframe">
			<div class = "head">
				<div class="navbar-fixed">
					<nav>
						<div class="nav-wrapper grey darken-4">
							<a href="#" class="brand-logo" id = "trending-head-text">Logo</a>
							<ul id="nav-mobile" class="right hide-on-med-and-down">
								<li><a href="sass.html">Sass</a></li>
								<li><a href="badges.html">Components</a></li>
								<li><a href="collapsible.html">JavaScript</a></li>
                <li id = "signout"><a href = "#">Signout</a></li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <div class = "display">
        <div id = "event-list-display"></div>
      </div>
      <div class = "foot">
        <footer class="page-footer grey darken-4">
         <div class="container">
          <div class="row">
           <div class="col l6 s12">
            <h5 class="white-text">Thanks for visiting</h5>
            <p class="grey-text text-lighten-4">Nearby could be coming to your city soon!</p>
          </div>
          <div class="col l4 offset-l2 s12">
            <h5 class="white-text">Links</h5>
            <ul>
             <li><a class="grey-text text-lighten-3" href="#!">Contact Us</a></li>
             <li><a class="grey-text text-lighten-3" href="#!">Facebook</a></li>
             <li><a class="grey-text text-lighten-3" href="#!">GenTech</a></li>
             <li><a class="grey-text text-lighten-3" href="#!">About</a></li>
           </ul>
         </div>
       </div>
     </div>
     <div class="footer-copyright">
      <div class="container">
       Â© 2015 NearbyNY
     </div>
   </div>
 </footer>
</div>
</div>
<!--  -->
<!--  -->

</div>
</body>
<script type="text/javascript" src="phonegap.js"></script>
<script type="text/javascript" src="cordova.js"></script>
<script id = "event-list" type="text/x-handlebars-template">
	<div class="row">
		{{#each event}}
		<div class="col s12 m12 l6">
			<div class="card blue-grey darken-1">
				<div class="card-image">
					<img src="http://wirednewyork.com/images/museums/moma/moma3.jpg">
					<span class="card-title">{{title}}</span>
				</div>
				<div class="card-content white-text">
					<p class = "event-description">{{description}}</p>
				</div>
				<div class="card-action">
					<a href="#">Sign me up!</a>
					<a href="#">More Info</a>
				</div>
			</div>
		</div>
		{{/each}}
	</div>
</script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/facebookConnectPlugin.js"></script>
<script type="text/javascript" src="js/parse-1.5.0.js"></script>
<!--<script type="text/javascript" src="js/main.js"></script>-->

<script type="text/javascript" src="js/handlebars-v3.0.3.js"></script>
<script type="text/javascript">
  Parse.initialize("bFpMdQLKzOXnYH7r9wdRRME4JmsZ4oxSae2YrH84", "T5dQgHMRBck7xs3Dws2tmhJylLabXaOzebAfVTsg");
  app.initialize();
	//buildLogin();
	//initEventList();
</script>
<div class="app">
            <h1>Apache Cordova</h1>
			<center>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
            <div class="event listening button" onclick="login();">Login with Facebook</div>
            <div class="event listening button" onclick="showDialog();">Show Dialog with Facebook</div>
            <div class="event listening button" onclick="apiTest();">Test API with Facebook</div>
            <div class="event listening button" onclick="getAccessToken();">Get access token with Facebook</div>
            <div class="event listening button" onclick="logPurchase();">Log Purchase Event</div>
            <div class="event listening button" onclick="logEvent();">Log Regular Event</div>
            <div class="event listening button" onclick="getStatus();">Get login status with Facebook</div>
            <div class="event listening button" onclick="logout();">Logout with Facebook</div>
        </div>
        <div id="fb-root"></div>
        <script type="text/javascript" src="cordova.js"></script>

        <script type="text/javascript">
            var login = function () {
                if (!window.cordova) {
                    var appId = prompt("Enter FB Application ID", "");
                    facebookConnectPlugin.browserInit(appId);
                }
                /*facebookConnectPlugin.login( ["email"],
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) });*/
					
			    facebookConnectPlugin.login(["email"], function(response) {
					if (response.authResponse) {
						facebookConnectPlugin.api('/me', null,
						function(response) {
							alert('Good to see you, ' +
                             response.username + response.name + '.' + response.id);
						});

					}
				}, {'scope':'email'});
            }
            
            var showDialog = function () { 
                facebookConnectPlugin.showDialog( { method: "feed" }, 
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) });
            }
            
            var apiTest = function () { 
                facebookConnectPlugin.api( "me/?fields=id,email", ["user_birthday"],
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) }); 
            }
            var logPurchase = function () {
                facebookConnectPlugin.logPurchase(1.99, "USD",
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) });
            }
            var logEvent = function () {
                // For more information on AppEvent param structure see
                // https://developers.facebook.com/docs/ios/app-events
                // https://developers.facebook.com/docs/android/app-events
                facebookConnectPlugin.logEvent("Purchased",
                    {
                        NumItems: 1,
                        Currency: "USD",
                        ContentType: "shoes",
                        ContentID: "HDFU-8452"
                    }, null,
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) });
            }
            var getAccessToken = function () { 
                facebookConnectPlugin.getAccessToken( 
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) });
            }
            
            var getStatus = function () { 
                facebookConnectPlugin.getLoginStatus( 
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) });
            }
            var logout = function () { 
                facebookConnectPlugin.logout( 
                    function (response) { alert(JSON.stringify(response)) },
                    function (response) { alert(JSON.stringify(response)) });
            }
        </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js"></script>
</body>
</html>